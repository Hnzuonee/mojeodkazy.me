<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Jméno Modelky | Ověření</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600&display=swap" rel="stylesheet" />
    <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
    <style>
      :root { --violet: #be4dff; --violet-d: #9c3bdb; --bg: #16161d; --card: #242432; --text: #f5f5f5; --muted: #aaa;}
      * { box-sizing: border-box; }
      body {
        margin: 0; font-family: 'Space Grotesk', sans-serif; background: var(--bg); color: var(--text);
        display: flex; flex-direction: column; align-items: center; justify-content: center;
        min-height: 100vh; text-align: center; padding: 2rem;
      }
      .card {
        width: 100%; max-width: 420px; background: var(--card);
        padding: 2rem; border-radius: 18px; box-shadow: 0 8px 28px rgba(0, 0, 0, .35);
      }
      img.avatar {
        width: 96px; height: 96px; border-radius: 50%; object-fit: cover; 
        border: 3px solid var(--violet); margin-bottom: 1rem;
        /* Nahraďte URL obrázku nebo použijte placeholder: https://via.placeholder.com/96/BE4DFF/FFFFFF?Text=JM */
        content: url("https://via.placeholder.com/96/BE4DFF/FFFFFF?Text=JM");
      }
      h1 { margin: .4rem 0; font-size: 24px; }
      p.bio { margin-bottom: 0.6rem; color: #cfcfcf; font-size: 15px; }
      p.hint { margin-bottom: 1.4rem; color: #aaa; font-size: 13px; font-style: italic; }
      .btn {
        display: block; width: 100%; margin: .45rem 0; padding: 14px;
        background: var(--violet); color: #fff; font-weight: 600;
        border: none; border-radius: 12px; font-size: 15px;
        text-decoration: none; cursor: pointer; transition: background .2s, transform .2s;
      }
      .btn:hover { background: var(--violet-d); transform: translateY(-2px); }
      .hidden { display: none; }
      .loader {
        width: 36px; height: 36px; border: 4px solid #444;
        border-top: 4px solid var(--violet); border-radius: 50%; 
        animation: spin 0.8s linear infinite; margin: 1rem auto;
      }
      @keyframes spin { 0% { transform: rotate(0); } 100% { transform: rotate(360deg); } }
      footer { font-size: 12px; color: #888; margin-top: 2rem; }
      footer a { color: #888; text-decoration: underline; }
    </style>
</head>
<body>
  <div class="card">
    <img src="#" alt="Profil" class="avatar" /> <h1>Jméno Modelky</h1>
    <p class="bio">Přístup k exkluzivnímu obsahu vyžaduje rychlé ověření.</p>
    <p id="verificationStatus" class="hint">Ověřujeme, že jste člověk... ⏳</p>

    <div id="loader" class="loader"></div>

    <form id="secureForm" method="POST" action="/.netlify/functions/verify-captcha" class="hidden">
        <div id="cf-turnstile-widget" class="cf-turnstile"
             data-sitekey="YOUR_TURNSTILE_SITE_KEY_HERE" 
             data-theme="dark"
             data-size="normal" 
             data-callback="onTurnstileSuccess">
        </div>
        <input type="hidden" name="cf-turnstile-response" id="cfTurnstileResponse"/>
        <button type="submit" class="btn" id="submitButton" style="margin-top: 1rem;">Pokračovat k obsahu</button>
    </form>
  </div>

  <footer style="display:none;"> © <span id="year-footer"></span> Jméno Modelky
  </footer>

  <script>
    document.querySelector('.avatar').src = "https://via.placeholder.com/96/BE4DFF/FFFFFF?Text=JM";
    // document.getElementById('year-footer').textContent = new Date().getFullYear(); // Pokud budete patičku používat

    // Globální funkce callbacku pro Turnstile
    // Musí být globální, aby ji Turnstile API našlo
    window.onTurnstileSuccess = function(token) {
        console.log("Turnstile success! Token:", token);
        document.getElementById("loader").style.display = 'none';
        document.getElementById("verificationStatus").textContent = "Ověření úspěšné! Můžete pokračovat.";
        document.getElementById("verificationStatus").style.color = "var(--success-color, #4CAF50)"; // Použijeme zelenou
        
        // Vyplníme token do formuláře
        const tokenInput = document.getElementById('cfTurnstileResponse');
        if (tokenInput) {
            tokenInput.value = token;
        }
        
        // Zobrazíme formulář (a tím i tlačítko)
        const secureForm = document.getElementById("secureForm");
        if (secureForm) {
            secureForm.classList.remove("hidden");
        }

        // Skryjeme widget Turnstile, protože už byl úspěšně vyřešen
        const turnstileWidget = document.getElementById('cf-turnstile-widget');
        if (turnstileWidget) {
            // turnstileWidget.style.display = 'none'; // Můžete odkomentovat, pokud chcete widget skrýt
        }
    };
    
    // Tento kód se může spustit, až bude Turnstile API načteno (díky async defer)
    // a widget bude připraven k renderování.
    // Alternativně, pokud byste chtěli renderovat explicitně po načtení stránky:
    // window.onload = () => {
    //     if (typeof turnstile !== 'undefined') {
    //         turnstile.render('#cf-turnstile-widget', {
    //             sitekey: 'YOUR_TURNSTILE_SITE_KEY_HERE', // Znovu uveďte sitekey
    //             callback: 'onTurnstileSuccess', // Název globální callback funkce
    //             theme: 'dark',
    //             size: 'normal' // 'invisible' by vyžadovalo turnstile.execute()
    //         });
    //         document.getElementById("loader").style.display = 'block'; // Zobrazit loader při explicitním renderování
    //         document.getElementById("verificationStatus").textContent = "Ověřujeme, že jste člověk... ⏳";
    //     } else {
    //         console.error("Turnstile API not loaded");
    //         document.getElementById("verificationStatus").textContent = "Chyba načítání ověřovacího nástroje.";
    //     }
    // };

    // Pokud používáte 'invisible' Turnstile, museli byste `turnstile.execute()` volat programově.
    // Pro `size: 'normal'` se widget zobrazí a uživatel s ním interaguje (nebo proběhne pasivně).
  </script>
</body>
</html>
